<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Augen - AI Vision Assistant</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="assets/css/style.css?v=2.0">
</head>
<body>
    <script>
        // Apply saved theme immediately to prevent flash
        const savedTheme = localStorage.getItem('theme') || 'standard';
        const savedFontSize = localStorage.getItem('font-size') || 'standard';
        const savedLanguage = localStorage.getItem('user-language') || 'auto';
        let className = `theme-${savedTheme} font-size-${savedFontSize}`;
        if (savedLanguage === 'ar') className += ' rtl';
        document.body.className = className;
    </script>
    <a href="#main-button" class="skip-link">Skip to main button</a>
    
    <!-- Settings button in header -->
    <div class="header-settings">
        <button id="settings-btn" class="settings-button" aria-label="Toggle settings">
            <span class="material-symbols-rounded">settings</span>
        </button>
    </div>
    
    <main class="container" role="main">
        <h1 id="main-heading">Augen</h1>
        
        <!-- Mode indicator -->
        <div id="mode-indicator" class="mode-indicator">
            <div class="mode-badge">
                <span class="mode-icon material-symbols-rounded">chat</span>
                <span class="mode-text">Chat Mode</span>
            </div>
            <p class="mode-description">Ask me anything by voice</p>
        </div>
        
        <div id="settings-panel" class="settings-panel" style="display: none;">
            <h2>Settings</h2>
            
            <!-- Theme Settings -->
            <div class="settings-section">
                <h3>Theme</h3>
                <label class="setting-item">
                    <select id="theme-select">
                        <option value="standard">Standard</option>
                        <option value="high-contrast">High Contrast</option>
                        <option value="dark-high-contrast">Dark High Contrast</option>
                        <option value="yellow-black">Yellow on Black</option>
                        <option value="white-blue">White on Blue</option>
                    </select>
                    <span>Color Theme</span>
                </label>
            </div>
            
            <!-- Font Size Settings -->
            <div class="settings-section">
                <h3>Text Size</h3>
                <label class="setting-item">
                    <select id="font-size-select">
                        <option value="small">Small</option>
                        <option value="standard">Standard</option>
                        <option value="large" selected>Large</option>
                        <option value="extra-large">Extra Large</option>
                        <option value="huge">Huge</option>
                    </select>
                    <span>Font Size</span>
                </label>
            </div>
            
            <!-- Language Settings -->
            <div class="settings-section">
                <h3>Language</h3>
                <label class="setting-item">
                    <select id="language-select">
                        <option value="auto">Auto-detect Language</option>
                        <option value="en">English</option>
                        <option value="es">Español (Spanish)</option>
                        <option value="fr">Français (French)</option>
                        <option value="de">Deutsch (German)</option>
                        <option value="it">Italiano (Italian)</option>
                        <option value="pt">Português (Portuguese)</option>
                        <option value="ru">Русский (Russian)</option>
                        <option value="ja">日本語 (Japanese)</option>
                        <option value="ko">한국어 (Korean)</option>
                        <option value="zh">中文 (Chinese)</option>
                        <option value="ar">العربية (Arabic)</option>
                        <option value="hi">हिन्दी (Hindi)</option>
                    </select>
                    <span>Language</span>
                </label>
            </div>
            
            <!-- Audio Settings -->
            <div class="settings-section">
                <h3>Audio</h3>
                <label class="setting-item">
                    <input type="checkbox" id="tts-echo-toggle">
                    <span>Echo what I say</span>
                </label>
                <label class="setting-item">
                    <input type="checkbox" id="morse-toggle">
                    <span>Morse Code Output</span>
                </label>
                <label class="setting-item">
                    <input type="checkbox" id="haptic-toggle" checked>
                    <span>Haptic Feedback</span>
                </label>
            </div>
        </div>
        
        <div class="button-area">
            <!-- Chat Mode: Only voice button -->
            <div id="chat-mode-buttons" class="mode-buttons">
                <button 
                    id="voice-btn" 
                    class="voice-button large-button" 
                    type="button"
                    aria-label="Voice input - ask me anything"
                    tabindex="0">
                    <span class="material-symbols-rounded icon">mic</span>
                    <span class="button-text">ASK</span>
                    <span class="button-subtitle">Voice chat with AI</span>
                </button>
                
                <button 
                    id="camera-btn" 
                    class="camera-button secondary-button" 
                    type="button"
                    aria-label="Take a picture to describe"
                    tabindex="0">
                    <span class="material-symbols-rounded icon">camera_alt</span>
                    <span class="button-text">TAKE PHOTO</span>
                </button>
            </div>
            
            <!-- Image Mode: Only describe button -->
            <div id="image-mode-buttons" class="mode-buttons" style="display: none;">
                <button 
                    id="describe-btn" 
                    class="camera-button large-button" 
                    type="button"
                    aria-label="Describe the captured image"
                    tabindex="0">
                    <span class="material-symbols-rounded icon">visibility</span>
                    <span class="button-text">DESCRIBE</span>
                    <span class="button-subtitle">What's in this image?</span>
                </button>
                
                <button 
                    id="ask-about-btn" 
                    class="voice-button secondary-button" 
                    type="button"
                    aria-label="Ask question about image"
                    tabindex="0">
                    <span class="material-symbols-rounded icon">help</span>
                    <span class="button-text">ASK ABOUT IT</span>
                </button>
            </div>
            
            <!-- TTS Control buttons -->
            <div id="tts-controls" class="tts-controls" style="display: none;">
                <button 
                    id="repeat-tts-btn" 
                    class="tts-control-button" 
                    type="button"
                    aria-label="Repeat last speech"
                    tabindex="0">
                    <span class="material-symbols-rounded">replay</span>
                    <span>REPEAT</span>
                </button>
                
                <button 
                    id="stop-tts-btn" 
                    class="tts-control-button stop-button" 
                    type="button"
                    aria-label="Stop speech"
                    tabindex="0">
                    <span class="material-symbols-rounded">stop</span>
                    <span>STOP</span>
                </button>
            </div>
            
            <!-- Reset button for going back to chat mode -->
            <button 
                id="reset-btn" 
                class="reset-button" 
                type="button"
                aria-label="Start new conversation"
                tabindex="0"
                style="display: none;">
                <span class="material-symbols-rounded">refresh</span>
                <span>NEW CHAT</span>
            </button>
        </div>
        
        <div id="instructions" class="sr-only">
            Use voice to chat with AI, or take photos to get descriptions and ask questions about them.
        </div>
        
        <div 
            id="status" 
            class="status-message" 
            aria-live="assertive" 
            aria-atomic="true"
            role="status"
            style="display: none;">
        </div>
        
        <input 
            type="file" 
            id="file-input" 
            accept="image/*" 
            capture="environment" 
            aria-hidden="true"
            style="display: none;">
    </main>
    
    <footer role="contentinfo">
        <nav aria-label="Footer navigation">
            <p><a href="about.html" tabindex="0">About</a> • <a href="help.html" tabindex="0">Help</a> • <a href="contact.html" tabindex="0">Contact</a></p>
        </nav>
        <p>AI-powered vision assistant for accessibility</p>
    </footer>
    
    <script src="assets/js/script.js?v=2.0"></script>
</body>
</html>